---
title: "Paramaterized Reports"
---

## Overview

R Markdown documents can define a set of parameters that are overrideable at the time that `rmarkdown::render` is called. For example:

```yaml
---
title: "My Document"
params:
  dataset: cars.csv
---
```

These parameters can be accessed during rendering using the `params` variable. For example:

<pre class="r"><code>&#96;&#96;&#96;{r}
data <- read.csv(params$dataset)
summary(data)
&#96;&#96;&#96;</code></pre>

The call to render can then provide alternative values for these parameters:

```r
rmarkdown::render("report.Rmd", params = list(dataset = "pressure.csv"))
```

## Complete Example

Here's a complete example of a parameterized report. The source code for this example is in the **rmdexamples** package located at <https://github.com/rstudio/rmdexamples>. Packages are an excellent way to distribute reports since they can contain both a function that calls the report and the underlying R Markdown document used to render the report.

First we define an R Markdown document that will be used as the basis for the report. Alongside the document we include a data file (mtcars.csv) that will be used as the default dataset during the preview/development of the report.

<pre class="markdown"><code>---
title: "Dataset View"
output: html_document
params: 
  dataset: mtcars.csv
---

#### &#96;r params$dataset&#96;

## Summary

&#96;&#96;&#96;{r, echo=FALSE, comment=NA}
data <- read.csv(params$dataset)
summary(data)
&#96;&#96;&#96;

## Browse Data

&#96;&#96;&#96;{r, echo=FALSE, results='asis'}
knitr::kable(data)
&#96;&#96;&#96;</code></pre>

Note that the `params` are used both in creating a subtitle as well as in the call to `read.csv`.

To invoke this report we define an R function that passes the custom parameters and also specifies the location of the output file:

```{r eval=FALSE}

dataset_view <- function(csv, output_file) {
  
  # get the path to the report
  report <- system.file("reports/dataset-view/dataset-view.Rmd", 
                        package = "rmdexamples")
  
  # render to the output file using the specified csv
  rmarkdown::render(input = report, 
                    output_file = output_file,
                    params = list(dataset = csv), 
                    envir = new.env())
} 
```

Here's an example of the code you would use to call the report:

```{r, eval=FALSE}
dataset_view(csv = "/var/data/cars.csv", output_file = "cars.html")
```

A couple of additional things to note about this example:

1) The output file is explicitly specified (since the default of writing output alongside the Rmd file wouldn't be desirable).

2) The `envir` parameter is passed `new.env()` to ensure that the report runs in a fresh, empty environment.

The full source code for this report can be found in the **rmdexamples** package located at <https://github.com/rstudio/rmdexamples>.


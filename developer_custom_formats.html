<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Creating New Formats</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<link rel="stylesheet"
      href="site_libs/highlight/textmate.css"
      type="text/css" />
<script src="site_libs/highlight/highlight.js"></script>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>

<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}

.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="site_libs/navigation-1.0/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-inverse  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">R Markdown v2</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Authoring 
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">R Markdown</li>
    <li>
      <a href="authoring_quick_tour.html">Quick Tour</a>
    </li>
    <li>
      <a href="authoring_basics.html">Markdown Basics</a>
    </li>
    <li>
      <a href="authoring_pandoc_markdown.html">Pandoc Markdown</a>
    </li>
    <li>
      <a href="authoring_rcodechunks.html">R Code Chunks</a>
    </li>
    <li>
      <a href="authoring_bibliographies_and_citations.html">Bibliographies &amp; Citations</a>
    </li>
    <li>
      <a href="authoring_migrating_from_v1.html">Migrating from v1</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="http://www.rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf">Cheat Sheet [PDF]</a>
    </li>
    <li>
      <a href="http://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">Reference Guide [PDF]</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Websites</li>
    <li>
      <a href="rmarkdown_websites.html">Creating a Website</a>
    </li>
    <li>
      <a href="rmarkdown_site_generators.html">Custom Site Generators</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Shiny</li>
    <li>
      <a href="authoring_shiny.html">Interactive Documents</a>
    </li>
    <li>
      <a href="authoring_embedded_shiny.html">Embedded Shiny Apps</a>
    </li>
    <li>
      <a href="authoring_shiny_widgets.html">Creating Shiny Widgets</a>
    </li>
    <li>
      <a href="authoring_shiny_advanced.html">Advanced Topics</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Formats 
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Documents</li>
    <li>
      <a href="html_document_format.html">HTML</a>
    </li>
    <li>
      <a href="pdf_document_format.html">PDF</a>
    </li>
    <li>
      <a href="word_document_format.html">Word</a>
    </li>
    <li>
      <a href="odt_document_format.html">ODT</a>
    </li>
    <li>
      <a href="rtf_document_format.html">RTF</a>
    </li>
    <li>
      <a href="markdown_document_format.html">Markdown</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Presentations</li>
    <li>
      <a href="ioslides_presentation_format.html">ioslides</a>
    </li>
    <li>
      <a href="revealjs_presentation_format.html">reveal.js</a>
    </li>
    <li>
      <a href="slidy_presentation_format.html">Slidy</a>
    </li>
    <li>
      <a href="beamer_presentation_format.html">Beamer</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">Other</li>
    <li>
      <a href="tufte_handout_format.html">Tufte Handout</a>
    </li>
    <li>
      <a href="package_vignette_format.html">Package Vignette</a>
    </li>
    <li>
      <a href="github_document_format.html">GitHub Document</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="r_notebook_format.html">R Notebooks</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Developer 
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="developer_html_widgets.html">HTML Widgets</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="developer_parameterized_reports.html">Parameterized Reports</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="developer_document_templates.html">Document Templates</a>
    </li>
    <li>
      <a href="developer_custom_formats.html">Creating New Formats</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="https://github.com/rstudio/rmarkdown">R Markdown on GitHub</a>
    </li>
  </ul>
</li>
<li>
  <a href="articles.html">Articles</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rstudio/rmarkdown">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title">Creating New Formats</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#deriving-from-built-in-formats">Deriving from Built-In Formats</a><ul>
<li><a href="#package-vignette-example">Package Vignette Example</a></li>
</ul></li>
<li><a href="#fully-custom-formats">Fully Custom Formats</a></li>
</ul>
</div>

<div id="overview" class="section level2">
<h2>Overview</h2>
<p>R Markdown includes several built-in document and presentation formats however you aren’t by any means limited to those. An R Markdown format is at it’s core just an R function. When you include an output format in the YAML front-matter of a document you are really just specifying the format function to call and the parameters to pass to it. For example, consider the following:</p>
<pre><code>---
title: &quot;Habits&quot;
output:
  mypackage::quarterly_report:
    toc: true
---</code></pre>
<p>This says to use the <code>quarterly_report</code> function defined in <code>mypackage</code> as the output format and to pass <code>toc = TRUE</code> as a parameter to the function.</p>
<p>The easist way to create a new format is to write a function that calls one of the built-in formats (they are designed to be extensible enough to serve as the foundation of custom formats). Another lower-level approach is to define a format directly by explicitly specifying knitr options and pandoc command line arguments. Both of these techniques are described below.</p>
</div>
<div id="deriving-from-built-in-formats" class="section level2">
<h2>Deriving from Built-In Formats</h2>
<p>To create a new format based on a built-in one you simply define a new function that calls one of the existing format functions. For example:</p>
<pre class="r"><code>quarterly_report &lt;- function(toc = TRUE) {

  # get the locations of resource files located within the package
  css &lt;- system.file(&quot;reports/styles.css&quot;, package = &quot;mypackage&quot;)
  header &lt;- system.file(&quot;reports/quarterly/header.html&quot;, package = &quot;mypackage&quot;)

  # call the base html_document function
  rmarkdown::html_document(toc = toc,
                           fig_width = 6.5,
                           fig_height = 4,
                           theme = NULL,
                           css = css,
                           includes = includes(before_body = header))
}</code></pre>
<p>This defines a new format with the following behavior:</p>
<ol style="list-style-type: decimal">
<li><p>Provides an option to determine whether there is a table of contents included in the document (implemented by passing <code>toc</code> through to the base format).</p></li>
<li><p>Sets a default height and width for figures (note this is purposely not user-customizable so as to encourage a standard for all reports of this type).</p></li>
<li><p>Disables the default bootstrap theme and provides custom CSS in its place.</p></li>
<li><p>Adds a standard header to every document.</p></li>
</ol>
<p>Note that (3) and (4) are implemented using external files that are stored within the package that defines the custom format, so their locations need to be looked up using the <code>system.file</code> function.</p>
<div id="package-vignette-example" class="section level3">
<h3>Package Vignette Example</h3>
<p>The <a href="package_vignette_format.html">Package Vignette</a> format provides an example of a format that customizes the base <a href="html_document_format.html"><code>html_document</code></a> format with custom CSS and some other tweaks related to vignette authoring. The source code for the Package Vignette <a href="https://github.com/rstudio/rmarkdown/blob/master/R/html_vignette.R">format</a> and <a href="https://github.com/rstudio/rmarkdown/tree/master/inst/rmarkdown/templates/html_vignette">custom template</a> are a good starting point for creating your own HTML based formats.</p>
</div>
</div>
<div id="fully-custom-formats" class="section level2">
<h2>Fully Custom Formats</h2>
<p>At it’s core an R Markdown format consists of:</p>
<ol style="list-style-type: decimal">
<li><p>A set of knitr options that govern how Rmd is converted to markdown.</p></li>
<li><p>A set of pandoc options that govern how markdown is converted to the final output format (e.g. HTML).</p></li>
<li><p>Some optional flags and filters (typically used to control handling of supporting files).</p></li>
</ol>
<p>You can create a new format using the <code>output_format</code> function. For example, here is the simpliest possible format defintion:</p>
<pre class="r"><code>simple_html_format &lt;- function() {
  rmarkdown::output_format(knitr = knitr_options(opts_chunk = list(dev = &#39;png&#39;)),
                           pandoc = pandoc_options(to = &quot;html&quot;),
                           clean_supporting = FALSE)
}</code></pre>
<p>Of course, knitr and pandoc options can get considerabiy more complicated (see the <code>knitr_options</code> and <code>pandoc_options</code> functions for details). The <code>clean_supporting</code> option indicates that you aren’t creating self contained output (like a PDF or HTML document with base64 encoded resources) and therefore want to preserve supporting files like plot images generated during knitting.</p>
<p>You can also pass a <code>base_format</code> to the <code>output_format</code> function if you want to inherit all of the behavior of an existing format but tweak a subset of it’s options.</p>
<p>If there are supporting files required for your format (e.g. HTML/CSS/JS) then you’ll also need to use the other arguments to <code>output_format</code> to ensure they are handled correctly (e.g. copying them into place alongside the generated document).</p>
<p>The best way to learn about creating fully custom formats is to study the <a href="https://github.com/rstudio/rmarkdown/tree/master/R">source code</a> of the existing built-in formats (e.g. <code>html_document</code> and <code>pdf_document</code>). In some cases a custom format will define it’s own <a href="http://pandoc.org/README.html#templates">pandoc template</a>. You can see the default pandoc templates used by the rmarkdown package by looking in the <a href="https://github.com/rstudio/rmarkdown/tree/master/inst/rmd"><code>inst/rmd</code></a> directory of the package.</p>
</div>



<!-- bizible -->
<script type="text/javascript" src="//cdn.bizible.com/scripts/bizible.js" async=""></script>


<!-- disqus -->
  <div id="disqus_thread" style="margin-top: 45px;"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'rmarkdown'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>



</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
